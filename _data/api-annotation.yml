consumes:
  - application/json
produces:
  - application/json
paths:
  /text_annotation:
    get:
      summary: Annotate a block of text, based on the specified dictionaries.
      parameters:
        - name: dictionaries
          in: query
          type: string
          description: dictionary names, delimited by comma (',')
          required: true
        - name: text
          in: query
          type: string
          description: a block of text
          required: true
        - name: rich
          in: query
          type: boolean
          description: set it to 'true' for rich output
          required: false
        - name: threshold
          in: query
          type: float
          description: similarity threshold for cut-off  
          required: false
      responses:
        200:
          description: annotation result in the PubAnnotation JSON Format
          examples:
            application/json: >
              {
                "text":"I have a stomach ache.",
                "denotations":[
                  {
                    "span":{"begin":9,"end":16},
                    "obj":"http://purl.obolibrary.org/obo/UBERON_0000945"
                  }
                ]
              }
        400:
          description: Bad Request, e.g., a mandatory parameter setting is missing.
          examples:
            application/json: >
              {
                "message": "no text is supplied."
              }
    post:
      summary: Same as above, but a block (or blocks) of text can be given in JSON
      parameters:
        - name: body
          in: body
          type: array
          items:
            type: object
          description: a JSON object with a block of text
          required: true
        - name: rich
          in: query
          type: boolean
          description: set it to 'true' for rich output
          required: false
        - name: threshold
          in: query
          type: float
          description: similarity threshold for cut-off  
          required: false
      responses:
        200:
          description: annotation result in PubAnnotation JSON Format
          examples:
            application/json: >
              {
                "text":"I have a stomach ache.",
                "denotations":[
                  {
                    "span":{"begin":9,"end":16},
                    "obj":"http://purl.obolibrary.org/obo/UBERON_0000945"
                  }
                ]
              }
        400:
          description: Bad Request, e.g., a mandatory parameter setting is missing.
          examples:
            application/json: >
              {
                "message": "no text is supplied."
              }
  /annotation_request:
    post:
      summary: Request to annotate a block of text (or blocks of text).
      parameters:
        - name: dictionaries
          in: query
          description: dictionaries, delimited by comma (',')
          required: true
        - name: body
          in: body
          type: array
          items:
            type: object
          description: a JSON object with a block of text, or an array of multiple JSON objects
          required: true
        - name: rich
          in: query
          type: boolean
          description: set it to 'true' for rich output
          required: false
        - name: threshold
          in: query
          type: float
          description: similarity threshold for cut-off  
          required: false
      responses:
        303:
          description: The URL from which the result of annotation to be retrieved will be informed through the Location header
          headers:
            Location:
              description: The URL from which the result of annotation to be retrieved
              type: string
              format: url
            Retry-after:
              description: How long the client is advised to wait before accessing the location of result
              type: string | integer
              format: http-date | delta-seconds
        400:
          description: Bad Request, e.g., a mandatory parameter setting is missing.
          examples:
            application/json: >
              {
                "message": "no text is supplied."
              }
        503:
          description: The request is valid, but the server is unavailable to fulfil it due to, e.g., server overload.
  /annotation_result/{id}:
    get:
      summary: Retrieve the result of annotation
      parameters:
        - name: id
          in: path
          type: string
          description: the id of annotation result
          required: true
      responses:
        200:
          description: The result of annotation in PubAnnotation JSON format.
          examples:
            application/json: >
              {
                "text":"I have a stomach ache.",
                "denotations":[
                  {
                    "span":{"begin":9,"end":16},
                    "obj":"http://purl.obolibrary.org/obo/UBERON_0000945"
                  }
                ]
              }
        404:
          description: The result of annotation is not (yet) available.
        410:
          description: The result of annotation is (permanently) removed from the server.
