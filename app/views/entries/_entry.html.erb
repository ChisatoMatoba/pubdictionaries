<%
  tr_class = if @dictionary.editable?(current_user)
    case entry.mode
      when EntryMode::GRAY then "entry gray"
      when EntryMode::WHITE then "entry white"
      when EntryMode::BLACK then "entry black"
      when EntryMode::AUTO_EXPANDED then "entry auto expanded"
      else "entry"
    end
  else
    "entry"
  end
%>

<tr class="<%= tr_class %>">
  <td>
    <span title="<%= entry.label%>"><%= entry.label %></span>
  </td>
  <td style="border-right-style: none">
    <%=
      if is_url?(entry.identifier)
        link_to(entry.identifier, entry.identifier, title: entry.identifier)
      else
        content_tag(:span, entry.identifier, title: entry.identifier)
      end
    -%>
  </td>
  <td style="border-left-style: none">
    <%= link_to('<i class="fa fa-search" aria-hidden="true"></i>'.html_safe, dictionary_path(@dictionary, id_search:entry.identifier), title: 'search') -%>
    <%= link_to('<i class="fa-solid fa-link"></i>'.html_safe, "https://pubannotation.org/term_search?term_search_controller_query%5Bblock_type%5D=sentence&term_search_controller_query%5Bterms%5D=#{entry.identifier}&term_search_controller_query%5Bpredicates%5D=&term_search_controller_query%5Bbase_project%5D=#{@dictionary.associated_annotation_project}&term_search_controller_query%5Bbase_project%5D=&term_search_controller_query%5Bpage%5D=1&term_search_controller_query%5Bper%5D=10", title: 'search') -%>
  </td>
  <td style="border-right-style: none">
    <% entry.tags.each do |tag| %>
      <%= tag.value %>
    <% end %>
  </td>
  <td style="border-left-style: none"></td>
  <% if @type_entries == 'Auto expanded' %>
    <td style="border-right-style: none">
      <%= entry.score %>
    </td>
  <% end %>
  <% if @dictionary.editable?(current_user) %>
    <td style="text-align: center">
      <% case entry.mode %>
      <% when EntryMode::GRAY %>
        <input type="checkbox" name="entry_id[]" id="entry_id_<%= entry.id %>" class="chkbox" value="<%= entry.id %>">
      <% when EntryMode::WHITE %>
        <%= link_to('<i class="fa-regular fa-trash-can" aria-hidden="true"></i>'.html_safe, undo_dictionary_entry_path(@dictionary, entry), method: :put, title: 'Remove') %>
      <% when EntryMode::BLACK %>
        <%= link_to('<i class="fa fa-undo" aria-hidden="true"></i>'.html_safe, undo_dictionary_entry_path(@dictionary, entry), method: :put, title: 'Back to gray') %>
      <% when EntryMode::AUTO_EXPANDED %>
        <input type="checkbox" name="entry_id[]" id="entry_id_<%= entry.id %>" class="chkbox" value="<%= entry.id %>">
      <% else %>
      <% end %>
    </td>
  <% end %>
</tr>
